<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <title>Formulario de Usuario</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link href="../static/style.css" />
  </head>
  <body>
    <div th:replace="~{fragments/nav :: nav}"></div>

    <div class="container content mt-4">
      <h1 class="text-center mb-4" th:text="${action == 'edit' ? 'Editar Usuario' : (action == 'view' ? 'Ver Usuario' : 'Eliminar Usuario')}"></h1>

      <div th:if="${error}" class="alert alert-danger text-center">
        <p th:text="${error}" class="m-0"></p>
      </div>

      <div th:if="${success}" class="alert alert-success text-center">
        <p th:text="${success}" class="m-0"></p>
      </div>

      <div class="card shadow">
        <div class="card-body">
          <form th:action="@{${action == 'edit' ? '/users/edit/' + user.id : (action == 'delete' ? '/users/delete/' + user.id : '')}}"
                th:object="${user}" method="post">

            <div class="row g-3 mb-3">
              <div class="col-md-6">
                <label for="id" class="form-label">ID</label>
                <input type="number" id="id" name="id" class="form-control" th:field="*{id}" required readonly  hidden/>
              </div>
              <div class="col-md-6">
                <label for="name" class="form-label">Nombre</label>
                <input type="text" id="name" name="name" class="form-control" th:field="*{name}" required 
                       th:readonly="${action == 'view' || action == 'delete'}" />
              </div>
            </div>

            <div class="row g-3 mb-3">
              <div class="col-md-6">
                <label for="surname" class="form-label">Apellidos</label>
                <input type="text" id="surname" name="surname" class="form-control" th:field="*{surname}" required
                       th:readonly="${action == 'view' || action == 'delete'}" />
              </div>
              <div class="col-md-6">
                <label for="edad" class="form-label">Edad</label>
                <input type="number" id="edad" name="edad" class="form-control" th:field="*{edad}" min="1" max="18"
                       required th:readonly="${action == 'view' || action == 'delete'}" />
              </div>
            </div>

            <div class="row g-3 mb-3">
              <div class="col-md-6">
                <label for="phone" class="form-label">Teléfono</label>
                <input type="text" id="phone" name="phone" class="form-control" th:field="*{phone}" required
                       th:readonly="${action == 'view' || action == 'delete'}" />
              </div>
              <div class="col-md-6">
                <label for="address" class="form-label">Dirección</label>
                <input type="text" id="address" name="address" class="form-control" th:field="*{address}" required
                       th:readonly="${action == 'view' || action == 'delete'}" />
              </div>
            </div>

            <div class="row g-3 mb-3">
              <div class="col-md-6">
                <label for="locality" class="form-label">Localidad</label>
                <input type="text" id="locality" name="locality" class="form-control" th:field="*{locality}" required
                       th:readonly="${action == 'view' || action == 'delete'}" />
              </div>
              <div class="col-md-6">
                <label for="province" class="form-label">Provincia</label>
                <input type="text" id="province" name="province" class="form-control" th:field="*{province}" required
                       th:readonly="${action == 'view' || action == 'delete'}" />
              </div>
            </div>

            <div class="text-center">
             <button type="submit" class="btn btn-success px-4" th:if="${action == 'add'}">
                <span>Añadir Usuario</span>
              </button>
               <button type="submit" class="btn btn-success px-4" th:if="${action == 'view'}">
                <span>Ver</span>
              </button>
              <button type="submit" class="btn btn-success px-4" th:if="${action == 'edit'}">
                <span>Edit</span>
              </button>
              <button type="submit" class="btn btn-danger px-4" th:if="${action == 'delete'}">
                <span>Eliminar</span>
              </button>
              <a href="/users" class="btn btn-secondary ms-2">Volver Atrás</a>
            </div>
          </form>
        </div>
      </div>
    </div>

    <footer>
      <div th:replace="~{fragments/footer :: footer}"></div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ppXQcVR6NwdEYtWuf2xyUt3fp05oLADZn6W0HwNz9IZ93+3NQIv2UypSBFwHExAj"
            crossorigin="anonymous"></script>
  </body>
</html>
